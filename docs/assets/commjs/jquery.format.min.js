!function(a){function b(a){var c,d,b="    ";for(b=isNaN(parseInt(a))?a:new Array(a+1).join(" "),c=["\n"],d=0;100>d;d++)c.push(c[d]+b);return c}function c(a,b){return b-(a.replace(/\(/g,"").length-a.replace(/\)/g,"").length)}function d(a,b){return a.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+b+b+"AND ").replace(/ BETWEEN /gi,"~::~"+b+"BETWEEN ").replace(/ CASE /gi,"~::~"+b+"CASE ").replace(/ ELSE /gi,"~::~"+b+"ELSE ").replace(/ END /gi,"~::~"+b+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+b+"ON ").replace(/ OR /gi,"~::~"+b+b+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+b+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+b).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+b+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}var e=function(b){this.init(b);var c=this.options.method;a.isFunction(this[c])||a.error("'"+c+"' is not a Formatter method."),this.format=function(a){return this[this.options.method].call(this,a)}};e.prototype={options:{},init:function(c){this.options=a.extend({},a.fn.format.defaults,c),this.step=this.options.step,this.preserveComments=this.options.preserveComments,this.shift=b(this.step)},xml:function(a){var b=a.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),c=b.length,d=!1,e=0,f="",g=0;for(g=0;c>g;g++)b[g].search(/<!/)>-1?(f+=this.shift[e]+b[g],d=!0,(b[g].search(/-->/)>-1||b[g].search(/\]>/)>-1||b[g].search(/!DOCTYPE/)>-1)&&(d=!1)):b[g].search(/-->/)>-1||b[g].search(/\]>/)>-1?(f+=b[g],d=!1):/^<\w/.exec(b[g-1])&&/^<\/\w/.exec(b[g])&&/^<[\w:\-\.\,]+/.exec(b[g-1])==/^<\/[\w:\-\.\,]+/.exec(b[g])[0].replace("/","")?(f+=b[g],d||e--):b[g].search(/<\w/)>-1&&-1==b[g].search(/<\//)&&-1==b[g].search(/\/>/)?f=f+=d?b[g]:this.shift[e++]+b[g]:b[g].search(/<\w/)>-1&&b[g].search(/<\//)>-1?f=f+=d?b[g]:this.shift[e]+b[g]:b[g].search(/<\//)>-1?f=f+=d?b[g]:this.shift[--e]+b[g]:b[g].search(/\/>/)>-1?f=f+=d?b[g]:this.shift[e]+b[g]:f+=b[g].search(/<\?/)>-1?this.shift[e]+b[g]:b[g].search(/xmlns\:/)>-1||b[g].search(/xmlns\=/)>-1?this.shift[e]+b[g]:b[g];return"\n"==f[0]?f.slice(1):f},xmlmin:function(a){var b=this.preserveComments?a:a.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns");return b.replace(/>\s{0,}</g,"><")},json:function(a){return"undefined"==typeof JSON?a:"string"==typeof a?JSON.stringify(JSON.parse(a),null,this.step):"object"==typeof a?JSON.stringify(a,null,this.step):a},jsonmin:function(a){return"undefined"==typeof JSON?a:JSON.stringify(JSON.parse(a),null,0)},css:function(a){var b=a.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),c=b.length,d=0,e="",f=0;for(f=0;c>f;f++)e+=/\{/.exec(b[f])?this.shift[d++]+b[f]:/\}/.exec(b[f])?this.shift[--d]+b[f]:/\*\\/.exec(b[f])?this.shift[d]+b[f]:this.shift[d]+b[f];return e.replace(/^\n{1,}/,"")},cssmin:function(a){var b=this.preserveComments?a:a.replace(/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\//g,"");return b.replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},sql:function(a){var b=a.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),e=b.length,f=[],g=0,h=this.step,i=0,j="",k=0;for(k=0;e>k;k++)f=k%2?f.concat(b[k]):f.concat(d(b[k],h));for(e=f.length,k=0;e>k;k++)i=c(f[k],i),/\s{0,}\s{0,}SELECT\s{0,}/.exec(f[k])&&(f[k]=f[k].replace(/\,/g,",\n"+h+h)),/\s{0,}\s{0,}SET\s{0,}/.exec(f[k])&&(f[k]=f[k].replace(/\,/g,",\n"+h+h)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(f[k])?(g++,j+=this.shift[g]+f[k]):/\'/.exec(f[k])?(1>i&&g&&g--,j+=f[k]):(j+=this.shift[g]+f[k],1>i&&g&&g--);return j=j.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},sqlmin:function(a){return a.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")}},a.fn.format=function(b){var c=new e(b);return this.each(function(){var b=a(this),d=b.val();d=c.format(d),b.val(d)})},a.format=function(a,b){var c=new e(b);return c.format(a)},a.fn.format.defaults={method:"xml",step:"    ",preserveComments:!1}}(jQuery);